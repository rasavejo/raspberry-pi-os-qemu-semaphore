---
id: v1
aliases: []
tags: []
---

For this version, we will implement semaphores using a similar method to the xv6 
https://pdos.csail.mit.edu/6.S081/2023/xv6/book-riscv-rev3.pdf
https://github.com/mit-pdos/xv6-public
to do this, we simply add the scheduler state "blocked", for tasks that then won't be scheduled but can be brought back to life
(we called this state blocked because we believe "sleep" is more appropriate for something else, for example a task that is waiting for an interrupt.)

- [>] faire une liste des taches bloquees par chaque semaphore ?
    - fait par aucun gros OS, on a donc cherche d'autres alternatives
- alternative : dans la task_struct, on a une variable "blocked_by", qui definit (quand on est bloque), par quelle semaphore on est bloque. Quand le scheduler passe sur une tache bloquee, on va chercher dans la semaphore "blocked_by" si elle s'est liberee depuis, et si oui lancer la tache et changer son etat a running

